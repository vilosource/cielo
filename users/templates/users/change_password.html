{% extends 'common/base_auth_fluid.html' %}
{% load static %}

{% block title %}Change Password{% endblock %}

{% block testimonial_title %}Security First!{% endblock %}
{% block testimonial_content %}
Your security is our priority. CIELO ensures that your account remains protected with strong password policies. 
Regular password updates help maintain the security of your cloud infrastructure management platform. 
Thank you for keeping your account secure.
{% endblock %}
{% block testimonial_author %}- Security Team{% endblock %}

{% block content %}
<!-- title-->
<h4 class="mt-0">Change Password</h4>
<p class="text-muted mb-4">Please update your password to continue using CIELO securely.</p>

<!-- form -->
<form method="post">
    {% csrf_token %}
    
    {% if form.non_field_errors %}
        <div class="alert alert-danger" role="alert">
            {% for error in form.non_field_errors %}
                {{ error }}
            {% endfor %}
        </div>
    {% endif %}
    
    <div class="mb-2">
        <label for="{{ form.old_password.id_for_label }}" class="form-label">{{ form.old_password.label }}</label>
        <div class="input-group input-group-merge">
            <input type="password" 
                   id="{{ form.old_password.id_for_label }}" 
                   name="{{ form.old_password.name }}"
                   class="form-control {% if form.old_password.errors %}is-invalid{% endif %}" 
                   placeholder="Enter your current password"
                   required>
            <div class="input-group-text" data-password="false">
                <span class="password-eye"></span>
            </div>
        </div>
        {% if form.old_password.errors %}
            <div class="invalid-feedback">
                {% for error in form.old_password.errors %}{{ error }}{% endfor %}
            </div>
        {% endif %}
    </div>
    
    <div class="mb-2">
        <label for="{{ form.new_password1.id_for_label }}" class="form-label">{{ form.new_password1.label }}</label>
        <div class="input-group input-group-merge">
            <input type="password" 
                   id="{{ form.new_password1.id_for_label }}" 
                   name="{{ form.new_password1.name }}"
                   class="form-control {% if form.new_password1.errors %}is-invalid{% endif %}" 
                   placeholder="Enter your new password"
                   required>
            <div class="input-group-text" data-password="false">
                <span class="password-eye"></span>
            </div>
        </div>
        {% if form.new_password1.errors %}
            <div class="invalid-feedback">
                {% for error in form.new_password1.errors %}{{ error }}{% endfor %}
            </div>
        {% endif %}
    </div>
    
    <div class="mb-3">
        <label for="{{ form.new_password2.id_for_label }}" class="form-label">{{ form.new_password2.label }}</label>
        <div class="input-group input-group-merge">
            <input type="password" 
                   id="{{ form.new_password2.id_for_label }}" 
                   name="{{ form.new_password2.name }}"
                   class="form-control {% if form.new_password2.errors %}is-invalid{% endif %}" 
                   placeholder="Confirm your new password"
                   required>
            <div class="input-group-text" data-password="false">
                <span class="password-eye"></span>
            </div>
        </div>
        {% if form.new_password2.errors %}
            <div class="invalid-feedback">
                {% for error in form.new_password2.errors %}{{ error }}{% endfor %}
            </div>
        {% endif %}
    </div>
    
    <div class="d-grid text-center">
        <button class="btn btn-primary" type="submit">Update Password</button>
    </div>
</form>
<!-- end form-->

<!-- Footer-->
<footer class="footer footer-alt">
    <p class="text-muted">Return to <a href="{% url 'users:login' %}" class="text-primary fw-medium ms-1">Sign In</a></p>
</footer>
{% endblock %}
